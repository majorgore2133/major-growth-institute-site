<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MGI Portal – Connectivity Check</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:#f7fbff;color:#142433}
  .wrap{max-width:720px;margin:0 auto;padding:24px}
  h1{margin:8px 0}
  .card{background:#fff;border:1px solid #e3edf6;border-radius:12px;padding:16px;box-shadow:0 10px 24px rgba(8,68,120,.06)}
  .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  input,button{padding:10px 12px;border-radius:10px;border:1px solid #d7e5f2}
  button{background:#0b5fa5;color:#fff;border:0;cursor:pointer}
  .ok{color:#138c3f;font-weight:700}
  .bad{color:#b2052a;font-weight:700}
  .muted{color:#6a7a8a;font-size:13px}
  .sp{height:10px}
</style>
</head>
<body>
<div class="wrap">
  <h1>MGI Client Portal — Connectivity Check</h1>
  <div id="conn" class="muted">Checking Firebase…</div>
  <div class="sp"></div>

  <div class="card">
    <h2>Sign in</h2>
    <div class="row">
      <input id="email" placeholder="Email" type="email" autocomplete="username">
      <input id="password" placeholder="Password" type="password" autocomplete="current-password">
    </div>
    <div class="row">
      <button id="create">Create Account</button>
      <button id="login">Sign In</button>
      <button id="google">Google Sign-In</button>
      <button id="logout" style="display:none;background:#caa43b;color:#142433">Log out</button>
    </div>
    <div class="sp"></div>
    <div id="status" class="muted">Not signed in.</div>
  </div>
</div>

<!-- Firebase SDKs (compat for static sites) -->
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>

<script>
  // === Your config (as you shared) ===
  const firebaseConfig = {
    apiKey: "AIzaSyAkaLgL4UDwVrKXK3RbWsDqwuhK2C7L49k",
    authDomain: "majorgrowthportal.firebaseapp.com",
    projectId: "majorgrowthportal",
    storageBucket: "majorgrowthportal.firebasestorage.app",
    messagingSenderId: "741963712787",
    appId: "1:741963712787:web:dbb9fb191cdae414b0f2e6",
    measurementId: "G-7NGDY9DYCW"
  };

  // === Init (single time) ===
  let auth, db;
  try{
    firebase.initializeApp(firebaseConfig);
    auth = firebase.auth();
    db   = firebase.firestore();
    document.getElementById('conn').innerHTML = 'Firebase: <span class="ok">Connected ✅</span>';
    console.log("Firebase connected:", !!firebase.apps.length);
  }catch(e){
    document.getElementById('conn').innerHTML = 'Firebase: <span class="bad">NOT connected ❌</span>';
    console.error(e);
  }

  const $ = id => document.getElementById(id);
  const status = $('status'), logout = $('logout');

  // Auth state
  if(auth){
    auth.onAuthStateChanged(u=>{
      if(u){
        status.innerHTML = `Signed in as <b>${u.email}</b><br><span class="muted">uid: ${u.uid}</span>`;
        logout.style.display = 'inline-block';
      }else{
        status.textContent = 'Not signed in.';
        logout.style.display = 'none';
      }
    });
  }

  // Buttons
  $('create').onclick = async ()=>{
    try{ await auth.createUserWithEmailAndPassword($('email').value, $('password').value); }
    catch(e){ alert(e.message); console.error(e); }
  };
  $('login').onclick = async ()=>{
    try{ await auth.signInWithEmailAndPassword($('email').value, $('password').value); }
    catch(e){ alert(e.message); console.error(e); }
  };
  $('google').onclick = async ()=>{
    try{ await auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()); }
    catch(e){ alert(e.message); console.error(e); }
  };
  logout.onclick = async ()=>{ try{ await auth.signOut(); } catch(e){ console.error(e); } };
</script>
</body>
</html>
